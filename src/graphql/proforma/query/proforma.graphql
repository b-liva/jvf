query getProformasByOrderId(
$orderId:ID,
$orderPk:Float
){
    getProformasByOrderId: allProformas(
    reqId:$orderId,
    reqPk:$orderPk
    ) {
        edges {
            node {
                id
                number
                perm
                dateFa
                reqId{
                    customer{
                     name
                    }
                }
            }
        }
    }
}

query getProforma($proformaId:ID!){
    getProforma:proforma(id:$proformaId){
        id
        number
        prefspecSet {
            edges {
                node {
                    id
                    qty
                    kw
                    rpm
                    voltage
                    price
                }
            }
        }
    }
}

query filterProformas($number: Int, $customerName: String) {
    filterProformas: allProformas(number: $number, reqId_Customer_Name_Icontains: $customerName) {
        edges {
            node {
                id
                number
                dateFa
                owner {
                    lastName
                }
                reqId {
                    customer {
                        id
                        name
                    }
                    orderfollowupSet(last: 1) {
                        edges {
                            node {
                                id
                                summary
                                description
                                dateFa
                            }
                        }
                    }
                }
            }
        }
    }
}

query getProformaDetails($id: ID!) {
    getProformaDetails: proforma(id: $id) {
        id
        number
        dateFa
        qty
        kw
        reqId {
            id
            number
            customer{
                id
                name
            }
        }
        prefspecSet {
            edges {
                node {
                    id
                    reqspecEq {
                        id
                        type {
                            id
                            title
                        }
                    }
                    code
                    qty
                    kw
                    rpm
                    voltage
                    im {
                        id
                        title
                    }
                    ip {
                        title
                        id
                    }
                    ic {
                        title
                        id
                    }
                    price
                }
            }
        }
        owner {
            id
            lastName
        }
    }
}
